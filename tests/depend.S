# depend.S
#
# Depednency Test
#
# This is a dependency test, that tests that a pipelined processor can
# properly handle dependencies at various hazard distances. There are a fair
# number of dependencies, so the IPC should be relatively low.

.section .text
    # Initialize the registers with values.
    li      x0, 0x2b8b4568
    li      x1, 0xf27b23c7
    li      x2, 0x243c986a
    li      x3, 0x26334874
    li      x4, 0x34b0dc52
    li      x5, 0xd9495d00
    li      x6, 0xeae8944b
    li      x7, 0x225558ed
    li      x8, 0xe38e1f2a
    li      x9, 0x6e87cce
    li      x10, 0xfd1b58bb
    li      x11, 0x107ed7ac
    li      x12, 0xeeb141f3
    li      x13, 0x1b71efc
    li      x14, 0x39e2a9e4
    li      x15, 0x3545e147
    li      x16, 0x115f007d
    li      x17, 0x1bd062c3
    li      x18, 0xd2200855
    li      x19, 0xdb127f9
    li      x20, 0xc216231c
    li      x21, 0xdf16e9e9
    li      x22, 0xd190cde8
    li      x23, 0x26ef438e
    li      x24, 0xd40e0f77
    li      x25, 0xf352255b
    li      x26, 0xd09cf92f
    li      x27, 0xcded7264
    li      x28, 0x3fdcc234
    li      x29, 0xdbefd7a0
    li      x30, 0x1a7c4ca
    li      x31, 0x2b68079b

    # Tests dependencies at various hazard distances.
    add     x3, x4, x2          # 0  0  0       [-nan]
    addi    x5, x2, -930        # 1  1  1       [1.000000]
    addi    x3, x5, -357        # 2  1  2       [1.250000]
    add     x2, x4, x1          # 3  3  3       [1.833333]
    add     x3, x2, x5          # 2  1  3       [1.875000]
    add     x5, x5, x5          # 4  4  4       [2.300000]
    add     x3, x2, x1          # 2  3  6       [2.666667]
    addi    x2, x1, -261        # 4  7  1       [2.857143]
    add     x2, x5, x1          # 1  3  8       [3.187500]
    add     x4, x2, x4          # 9  1  9       [3.388889]
    addi    x2, x3, -132        # 2  4  10      [3.750000]
    addi    x2, x2, 1161        # 1  1  11      [3.954545]
    add     x5, x4, x3          # 7  3  6       [4.000000]
    add     x5, x3, x5          # 1  7  1       [4.000000]
    addi    x4, x5, -1478       # 5  1  8       [4.035714]
    add     x5, x5, x2          # 2  2  4       [3.966667]
    add     x5, x3, x5          # 1  10 1       [4.062500]
    addi    x5, x4, 788         # 1  3  11      [4.235294]
    addi    x1, x2, -1159       # 18 7  12      [4.527778]
    addi    x4, x2, 529         # 5  8  8       [4.710526]
    add     x4, x2, x4          # 1  9  1       [4.725000]
    add     x2, x3, x3          # 10 15 15      [5.214286]
    add     x4, x4, x5          # 2  2  5       [5.136364]
    add     x5, x1, x4          # 6  5  1       [5.043478]
    add     x2, x2, x3          # 3  3  18      [5.270833]
    addi    x2, x4, -237        # 1  3  7       [5.260000]
    add     x2, x4, x4          # 1  4  4       [5.211538]
    addi    x3, x3, 564         # 21 21 4       [5.481482]
    add     x1, x5, x2          # 10 5  2       [5.410714]
    add     x5, x5, x2          # 6  6  3       [5.379310]
    add     x2, x2, x1          # 4  4  2       [5.300000]
    add     x2, x0, x5          # 1  31 2       [5.661290]
    add     x4, x5, x4          # 10 3  10      [5.687500]
    addi    x3, x4, 520         # 6  1  4       [5.590909]
    addi    x5, x2, -358        # 5  3  2       [5.500000]
    add     x3, x5, x1          # 2  1  7       [5.457143]
    add     x2, x5, x3          # 5  2  1       [5.347222]
    add     x1, x2, x4          # 9  1  5       [5.283784]
    add     x5, x4, x3          # 4  6  3       [5.263158]
    addi    x2, x1, 1586        # 3  2  3       [5.192307]
    add     x4, x2, x5          # 8  1  2       [5.100000]
    add     x2, x5, x2          # 2  3  2       [5.036585]
    add     x2, x2, x1          # 1  1  5       [4.988095]
    add     x5, x1, x3          # 5  6  8       [5.034883]
    addi    x2, x5, 564         # 2  1  1       [4.943182]
    add     x2, x4, x0          # 1  5  45      [5.388889]
    addi    x2, x4, 1656        # 1  6  46      [5.836957]
    addi    x3, x2, -48         # 12 1  10      [5.829787]
    addi    x5, x2, -1716       # 5  2  2       [5.750000]
    add     x3, x3, x4          # 2  2  9       [5.744898]
    addi    x4, x5, -615        # 10 2  2       [5.670000]
    add     x1, x4, x4          # 14 1  1       [5.578432]
    add     x1, x5, x1          # 1  4  1       [5.519231]
    add     x2, x5, x2          # 7  5  7       [5.528302]
    add     x4, x4, x4          # 4  4  4       [5.500000]
    addi    x2, x3, -1435       # 2  6  3       [5.481818]
    add     x4, x5, x1          # 2  8  4       [5.491071]
    addi    x1, x1, -1967       # 5  5  8       [5.508772]
    add     x5, x3, x2          # 10 9  3       [5.517241]
    add     x4, x3, x1          # 3  10 2       [5.525424]
    add     x2, x4, x2          # 5  1  5       [5.483333]
    add     x1, x5, x2          # 4  3  1       [5.426229]
    addi    x5, x5, 1535        # 4  4  62      [5.870968]
    add     x2, x1, x2          # 3  2  3       [5.817461]
    add     x5, x3, x1          # 2  15 3       [5.867188]
    addi    x4, x5, -1087       # 6  1  1       [5.792308]
    add     x1, x5, x5          # 5  2  2       [5.734848]
    addi    x3, x3, 216         # 18 18 4       [5.813433]
    add     x0, x3, x3          # 68 1  1       [5.742647]
    add     x3, x2, x3          # 2  6  2       [5.717391]
    addi    x4, x4, -1362       # 5  5  6       [5.714286]
    add     x2, x2, x4          # 8  8  1       [5.697183]
    add     x0, x4, x2          # 4  2  1       [5.638889]
    addi    x5, x4, 8           # 9  3  4       [5.609589]
    add     x1, x1, x2          # 8  8  3       [5.608108]
    addi    x2, x2, -1833       # 4  4  3       [5.580000]
    addi    x3, x2, 1177        # 7  1  3       [5.532895]
    add     x3, x4, x4          # 1  7  7       [5.551948]
    add     x2, x5, x3          # 3  5  1       [5.519231]
    addi    x5, x5, 1737        # 6  6  2       [5.500000]
    add     x1, x1, x5          # 6  6  1       [5.475000]
    add     x2, x4, x5          # 3  11 2       [5.487654]
    add     x1, x1, x3          # 2  2  5       [5.463415]
    add     x1, x1, x5          # 1  1  4       [5.427711]
    add     x1, x1, x3          # 1  1  7       [5.410714]
    addi    x2, x1, 1003        # 4  1  6       [5.388235]
    add     x4, x5, x1          # 16 7  2       [5.377907]
    addi    x5, x2, 1102        # 8  2  15      [5.413793]
    add     x1, x4, x4          # 4  2  2       [5.375000]
    add     x2, x4, x2          # 4  3  4       [5.353932]
    add     x5, x4, x3          # 3  4  13      [5.388889]
    add     x1, x3, x4          # 3  14 5       [5.434066]
    addi    x4, x2, -758        # 6  3  6       [5.423913]
    addi    x3, x2, 781         # 16 4  16      [5.473118]
    add     x3, x1, x3          # 1  3  1       [5.436170]
    add     x2, x4, x5          # 6  3  5       [5.421052]
    addi    x4, x1, -1235       # 4  5  24      [5.515625]
    add     x2, x3, x5          # 2  3  7       [5.510309]
    add     x2, x3, x2          # 1  4  1       [5.479592]
    add     x2, x5, x1          # 1  9  8       [5.510101]
    addi    x1, x2, -1397       # 9  1  6       [5.490000]
    add     x1, x0, x5          # 1  29 11      [5.633663]
    add     x5, x5, x3          # 12 12 8       [5.676471]
    addi    x1, x5, -68         # 2  1  7       [5.660194]
    addi    x2, x3, -1051       # 5  10 2       [5.663462]
    add     x2, x1, x3          # 1  2  11      [5.671429]
    add     x3, x2, x5          # 12 1  4       [5.641510]
    addi    x4, x1, -1506       # 11 4  1       [5.612150]
    addi    x5, x0, 1267        # 6  36 1       [5.731482]
    add     x5, x3, x3          # 1  3  3       [5.706422]
    add     x2, x4, x2          # 5  3  5       [5.690909]
    add     x2, x4, x1          # 1  4  8       [5.693694]
    add     x5, x4, x1          # 3  5  9       [5.705357]
    add     x2, x3, x3          # 2  7  7       [5.716814]
    add     x3, x4, x5          # 8  7  2       [5.706141]
    add     x5, x4, x5          # 3  8  3       [5.704348]
    addi    x4, x3, -14         # 9  2  44      [5.853448]
    add     x5, x3, x5          # 2  3  2       [5.824786]
    add     x4, x1, x3          # 2  15 4       [5.855932]
    addi    x3, x5, -214        # 5  2  1       [5.819328]
    addi    x1, x5, 1555        # 17 3  17      [5.854167]
    add     x2, x1, x3          # 8  1  2       [5.818182]
    add     x4, x2, x4          # 4  1  4       [5.790984]
    add     x2, x5, x2          # 2  6  2       [5.776423]
    add     x4, x3, x4          # 2  5  2       [5.758065]
    add     x3, x4, x1          # 6  1  5       [5.736000]
    add     x1, x5, x3          # 6  9  1       [5.730159]
    add     x2, x2, x3          # 4  4  2       [5.708662]
    add     x1, x4, x5          # 2  4  11      [5.722656]
    add     x5, x4, x4          # 12 5  5       [5.717054]
    addi    x5, x4, -720        # 1  6  3       [5.707692]
    add     x1, x4, x4          # 3  7  7       [5.717557]
    add     x2, x3, x4          # 5  7  8       [5.731061]
    add     x5, x5, x1          # 3  3  2       [5.706767]
    add     x2, x5, x3          # 2  1  9       [5.701492]
    add     x1, x5, x3          # 4  2  10      [5.703704]
    add     x4, x1, x5          # 12 1  3       [5.676471]
    add     x2, x4, x4          # 3  1  1       [5.642336]
    add     x5, x4, x3          # 5  2  13      [5.655797]
    add     x1, x2, x5          # 4  2  1       [5.625899]
    add     x1, x2, x5          # 1  3  2       [5.603571]
    addi    x5, x3, 1649        # 3  16 4       [5.634752]
    addi    x1, x4, -150        # 2  6  70      [5.862676]
    add     x5, x5, x1          # 2  2  1       [5.832168]
    addi    x1, x1, 1013        # 2  2  7       [5.822917]
    addi    x4, x3, 1115        # 9  20 8       [5.879310]
    add     x5, x2, x4          # 3  9  1       [5.873288]
    add     x1, x2, x2          # 3  10 10      [5.901361]
    addi    x2, x3, -2006       # 11 23 3       [5.949324]
    addi    x2, x2, 1996        # 1  1  3       [5.922819]
    addi    x4, x2, -162        # 5  1  4       [5.900000]
    add     x5, x3, x1          # 5  26 4       [5.960265]
    add     x1, x1, x4          # 5  5  2       [5.944079]
    addi    x3, x5, -1839       # 28 2  2       [5.918301]
    addi    x5, x5, -1404       # 3  3  2       [5.896104]
    add     x3, x1, x4          # 2  3  5       [5.883871]
    addi    x4, x3, 921         # 6  1  1       [5.852564]
    add     x4, x2, x2          # 1  8  8       [5.866242]
    add     x2, x1, x3          # 9  6  3       [5.857595]
    addi    x2, x1, -825        # 1  7  87      [6.116352]
    add     x5, x3, x3          # 6  5  5       [6.109375]
    add     x2, x3, x4          # 2  6  4       [6.102485]
    add     x3, x5, x5          # 7  2  2       [6.077160]
    add     x3, x5, x3          # 1  3  1       [6.052147]
    add     x5, x2, x2          # 4  3  3       [6.033536]
    addi    x0, x1, -419        # 93 13 4       [6.048485]
    addi    x2, x4, -552        # 5  9  14      [6.081326]
    add     x4, x4, x2          # 10 10 1       [6.077844]
    addi    x2, x1, 1229        # 2  16 2       [6.095238]
    addi    x1, x2, -1702       # 17 1  5       [6.076923]
    add     x3, x3, x3          # 7  7  7       [6.082353]
    add     x3, x1, x4          # 1  2  4       [6.064328]
    addi    x5, x4, -1666       # 8  5  8       [6.066861]
    addi    x1, x3, -1775       # 4  2  5       [6.052023]
    add     x5, x1, x2          # 2  1  6       [6.037356]
    addi    x3, x3, 1365        # 4  4  7       [6.034286]
    add     x3, x5, x5          # 1  2  2       [6.011364]
    add     x3, x2, x1          # 1  9  4       [6.014124]
    add     x1, x5, x4          # 5  4  11      [6.022472]
    add     x1, x5, x5          # 1  5  5       [6.016760]
    add     x2, x5, x4          # 12 6  13      [6.036111]
    add     x4, x5, x2          # 14 7  1       [6.024862]
    add     x4, x2, x4          # 1  2  1       [6.000000]
    addi    x2, x3, 397         # 3  6  18      [6.032787]
    add     x3, x3, x1          # 7  7  5       [6.032609]
    add     x2, x5, x2          # 2  11 2       [6.035135]
    add     x2, x4, x5          # 1  4  12      [6.045699]
    addi    x3, x2, -887        # 3  1  13      [6.050802]
    addi    x2, x2, 977         # 2  2  9       [6.047873]
    addi    x5, x5, 1071        # 15 15 10      [6.082011]
    addi    x2, x5, 941         # 2  1  8       [6.073684]
    add     x1, x3, x3          # 12 4  4       [6.062827]
    add     x1, x4, x2          # 1  10 2       [6.062500]
    add     x2, x4, x1          # 3  11 1       [6.062176]
    addi    x5, x3, -26         # 5  7  12      [6.079897]
    add     x5, x4, x4          # 1  13 13      [6.115385]
    add     x3, x5, x2          # 9  1  3       [6.094388]
    addi    x2, x2, 100         # 4  4  5       [6.086295]
    add     x5, x5, x5          # 3  3  3       [6.070707]
    add     x2, x4, x5          # 2  17 1       [6.085427]
    add     x0, x1, x4          # 35 8  18      [6.120000]
    add     x4, x1, x1          # 19 9  9       [6.134328]
    addi    x4, x5, 1913        # 1  4  6       [6.128713]
    add     x2, x2, x5          # 4  4  5       [6.120690]
    addi    x4, x5, 135         # 2  6  8       [6.125000]
    addi    x2, x4, 475         # 2  1  9       [6.119512]
    addi    x2, x1, 1101        # 1  14 2       [6.128641]
    add     x5, x3, x3          # 9  11 11      [6.152174]
    add     x1, x5, x3          # 16 1  12      [6.153846]
    add     x3, x3, x5          # 13 13 2       [6.160287]
    add     x3, x4, x2          # 1  6  4       [6.154762]
    add     x4, x1, x1          # 7  3  3       [6.139811]
    add     x1, x4, x2          # 4  1  6       [6.127358]
    add     x3, x4, x1          # 3  2  1       [6.105634]
    add     x4, x3, x5          # 3  1  7       [6.095794]
    addi    x1, x5, -1358       # 3  8  3       [6.093023]
    add     x5, x3, x4          # 9  3  2       [6.076389]
    add     x5, x1, x4          # 1  2  3       [6.059908]
    addi    x3, x2, 1960        # 5  12 1       [6.061927]
    addi    x5, x1, 1868        # 2  4  19      [6.086758]
    add     x3, x5, x2          # 2  1  14      [6.093182]
    addi    x1, x1, -1400       # 6  6  6       [6.092760]
    add     x3, x4, x0          # 2  8  22      [6.132883]
    add     x2, x4, x3          # 17 9  1       [6.127803]
    addi    x5, x2, -1052       # 5  1  10      [6.125000]
    addi    x4, x1, 795         # 11 4  2       [6.111111]
    add     x4, x1, x2          # 1  5  3       [6.101770]
    add     x1, x2, x5          # 6  4  3       [6.090308]
    addi    x3, x3, -732        # 6  6  1       [6.078948]
    add     x3, x4, x5          # 1  3  5       [6.069869]
    add     x4, x3, x1          # 4  1  3       [6.052174]
    add     x4, x2, x1          # 1  8  4       [6.051948]
    add     x1, x4, x5          # 5  1  8       [6.045259]
    add     x4, x4, x3          # 2  2  4       [6.032189]
    add     x4, x5, x5          # 1  10 10      [6.049145]
    add     x1, x5, x3          # 3  11 6       [6.059575]
    add     x1, x5, x1          # 1  12 1       [6.061440]
    add     x1, x2, x3          # 1  14 8       [6.082278]
    add     x1, x3, x1          # 1  9  1       [6.077731]
    add     x5, x3, x2          # 15 10 16      [6.106695]
    addi    x1, x5, -1573       # 2  1  17      [6.118750]
    add     x3, x5, x2          # 12 2  18      [6.134855]
    addi    x3, x1, 1484        # 1  2  19      [6.152893]
    addi    x5, x1, -4          # 4  3  43      [6.222222]
    add     x5, x3, x0          # 1  2  44      [6.290984]
    add     x4, x2, x1          # 11 22 5       [6.320408]
    add     x2, x3, x4          # 23 4  1       [6.304878]
    addi    x0, x2, 1186        # 47 1  3       [6.287449]
    addi    x1, x1, -837        # 8  8  3       [6.284274]
    add     x5, x2, x4          # 5  3  4       [6.273092]

    li a0, 0x0
    rdinstret a1
    rdcycle a2
    ebreak
